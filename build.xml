<project name="jldap" default="debug" basedir=".">
<!-- Targets                                                                 -->
<!--     clean   - Cleans all generated files and directories in this and    -->
<!--               subbordinate directories                                  -->
<!--     cleanpkg- Cleans pkg directory                                      -->
<!--     doc     - Builds javadoc files                                      -->
<!--               Not available at the lowest directory level               -->
<!--     debug   - Builds debug classes and jar files                        -->
<!--               At the lowest level directory it only compiles java files.-->
<!--     release - Builds release classes and jar files                      -->
<!--               At the lowest level directory it only compiles java files.-->
<!--     lib     - Builds debug & release classes and jar files.             -->
<!--               At the lowest level directory it only compiles java files.-->
<!--     jar     - Synonym for lib                                           -->
<!--     all     - Builds everything possible.  At the top directory level it-->
<!--               builds all, doc, & install.  At one directory level below --> 
<!--               the top it builds all, & doc. At the lowest directory     -->
<!--               level it compiles java files for release and debug.       -->
<!--     install - Copies build results from all directories and creates the -->
<!--               pkg directory.  Only available in top makefile            -->
<!--     pkt     - Synonym for pkg                                           -->

<property name="pkg" value="pkg"/>
<property name="pkg.lib" value="pkg/lib"/>
<property name="pkg.lib.debug" value="pkg/lib_debug"/>
<property name="pkg.doc" value="pkg/doc"/>
<property name="pkg.samples" value="pkg/samples"/>

<property name="lib" value="lib"/>
<property name="doc" value="doc"/>
<property name="lib.debug" value="lib_debug"/>
<property name="ldap" value="ldap"/>
<property name="novbp" value="novbp"/>

  <target name="init">
    <tstamp/>
  </target>

  <target name="clean" depends="cleanpkg">
    <ant dir="${basedir}/${ldap}" target="clean"/>
    <ant dir="${basedir}/${novbp}" target="clean"/>
  </target>

  <target name="cleanpkg" depends="init">
	<deltree dir="${pkg}"/>
  </target>

  <target name="doc" depends="init">
    <ant dir="${basedir}/${ldap}" target="doc"/>
    <ant dir="${basedir}/${novbp}" target="doc"/>
  </target>

  <target name="debug" depends="init">
    <ant dir="${basedir}/${ldap}" target="debug" />
    <ant dir="${basedir}/${novbp}" target="debug" />
  </target>

  <target name="release" depends="init">
    <ant dir="${basedir}/${ldap}" target="release" />
    <ant dir="${basedir}/${novbp}" target="release" />
  </target>

  <target name="final" depends="release" />

  <target name="lib" depends="debug, release"/>

  <target name="jar" depends="lib"/>

  <target name="install" depends="init">
	<mkdir dir="${ldap}/${doc}"/>
	<mkdir dir="${ldap}/${lib}"/>
	<mkdir dir="${ldap}/${lib.debug}"/>
	<mkdir dir="${novbp}/${doc}"/>
	<mkdir dir="${novbp}/${lib}"/>
	<mkdir dir="${novbp}/${lib.debug}"/>
	<mkdir dir="${pkg.lib}"/>
	<mkdir dir="${pkg.lib.debug}"/>
	<mkdir dir="${pkg.doc}"/>
	<mkdir dir="${pkg.doc}/${ldap}"/>
	<mkdir dir="${pkg.doc}/${novbp}"/>
	<mkdir dir="${pkg.samples}/${novbp}/ext"/>

	<copydir src="${ldap}/${lib}"         dest="${pkg.lib}"/>
	<copydir src="${novbp}/${lib}"        dest="${pkg.lib}"/>

	<copydir src="${ldap}/${lib.debug}"   dest="${pkg.lib.debug}"/>
	<copydir src="${novbp}/${lib.debug}"  dest="${pkg.lib.debug}"/>

	<copydir src="${ldap}/${doc}"         dest="${pkg.doc}/${ldap}"/>
	<copydir src="${novbp}/${doc}"        dest="${pkg.doc}/${novbp}"/>

	<copydir src="${novbp}/samples/ldap/ext"  dest="${pkg.samples}/${novbp}/ext"/>
  </target>

  <target name="pkg" depends="install"/>

  <target name="all.subdir" depends="init">
    <ant dir="${basedir}/${ldap}" target="all" />
    <ant dir="${basedir}/${novbp}" target="all" />
  </target>

  <target name="all" depends="init, all.subdir, cleanpkg, install" />

  <target name="samples" depends="init">
    <ant dir="${basedir}/${ldap}" target="samples" />
    <ant dir="${basedir}/${novbp}" target="samples" />
  </target>

  <target name="tests" depends="init">
    <ant dir="${basedir}/${ldap}" target="tests" />
    <ant dir="${basedir}/${novbp}" target="tests" />
  </target>

</project>
